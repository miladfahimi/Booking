<div class="limiter">
  <div class="container-login100">
    <div class="wrap-login100">
      <form [formGroup]="signUpForm" (ngSubmit)="onSubmit()" class="login100-form">
        <span class="login100-form-title">ثبت نام</span>

        <!-- Show Spinner when loading -->
        @if ((loadingStatus$ | async)?.loading) {
        <app-spinner></app-spinner>
        }

        <!-- Username Input Field -->
        <div class="wrap-input100"
          [ngClass]="{ 'has-error': signUpForm.get('username')?.invalid && signUpForm.get('username')?.touched }">
          <input class="input100" type="text" formControlName="username" placeholder="نام کاربری">
          @if (signUpForm.get('username')?.invalid && signUpForm.get('username')?.touched) {
          <div class="error-message">
            <small>نام کاربری الزامی است</small>
          </div>
          }
        </div>

        <!-- Email Input Field -->
        <div class="wrap-input100"
          [ngClass]="{ 'has-error': signUpForm.get('email')?.invalid && signUpForm.get('email')?.touched }">
          <input class="input100" type="email" formControlName="email" placeholder="ایمیل">
          @if (signUpForm.get('email')?.invalid && signUpForm.get('email')?.touched) {
          <div class="error-message">
            <small>ایمیل معتبر نیست</small>
          </div>
          }
        </div>

        <!-- Password Input Field -->
        <div class="wrap-input100"
          [ngClass]="{ 'has-error': signUpForm.get('password')?.invalid && signUpForm.get('password')?.touched }">
          <input class="input100" type="password" formControlName="password" placeholder="رمز عبور">
          @if (signUpForm.get('password')?.invalid && signUpForm.get('password')?.touched) {
          <div class="error-message">
            <small>رمز عبور الزامی است (حداقل ۳ کاراکتر)</small>
          </div>
          }
        </div>

        <!-- Phone Input Field -->
        <div class="wrap-input100"
          [ngClass]="{ 'has-error': signUpForm.get('phone')?.invalid && signUpForm.get('phone')?.touched }">
          <input class="input100" type="text" formControlName="phone" placeholder="تلفن همراه">
          @if (signUpForm.get('phone')?.invalid && signUpForm.get('phone')?.touched) {
          <div class="error-message">
            <small>تلفن همراه الزامی است</small>
          </div>
          }
        </div>

        <!-- Submit Button -->
        <div class="container-login100-form-btn">
          <button type="submit" class="login100-form-btn"
            [disabled]="signUpForm.invalid || (loadingStatus$ | async)?.loading">
            ثبت نام
          </button>
        </div>

        <!-- Error Message -->
        @if (errorMessage$ | async) {
        <div class="alert alert-danger p-t-20">{{ errorMessage$ | async }}</div>
        }

        <!-- Sign In Link -->
        <div class="text-right p-t-20">
          <a href="/auth/signin" class="txt1">کاربر قبلی هستم</a>
        </div>

        <div class="text-right p-r-20">
          <a routerLink="/auth/otp" class="txt2">ورود با کد پیامکی</a>
        </div>
      </form>
    </div>
  </div>
</div>