<div class="limiter">
  <div class="container-calendar">
    <div class="wrap-calendar">
      <!-- Load Mobile or Desktop Calendar Component -->
      @let isMobileView = true;
      @if (isMobileView) {
      <app-reservation-calendar-mobile [isMobile]="isMobileView" (selectDay)="onDaySelected($event)">
      </app-reservation-calendar-mobile>
      } @else {
      <app-reservation-calendar-desktop [isMobile]="isMobileView" (selectDay)="onDaySelected($event)">
      </app-reservation-calendar-desktop>
      }

      <app-timeline></app-timeline>
      <div class="legend flex items-center justify-end gap-4 text-xs text-slate-500" aria-hidden="true">
        <div class="legend-item available inline-flex items-center gap-2">
          <span class="h-3.5 w-3.5 rounded"></span>
          در دسترس
        </div>
        <div class="legend-item booked inline-flex items-center gap-2">
          <span class="h-3.5 w-3.5 rounded"></span>
          رزرو شده
        </div>
        <div class="legend-item pending inline-flex items-center gap-2">
          <span class="h-3.5 w-3.5 rounded"></span>
          در انتظار
        </div>
      </div>

      <!-- Items component kept for potential future use -->
      <!--
      <app-reservation-items
        [items]="items"
        (selectItem)="selectDuration($event)">
      </app-reservation-items>
      -->

      <!-- Hours component kept for potential future use -->
      <!--
      <app-reservation-hours
        [timeSlots]="timeSlots$ | async"
        (selectSlot)="selectSlot($event)">
      </app-reservation-hours>
      -->

      <app-reservation-slots-table [services]="items" [selectedServiceId]="selectedService?.id || null"
        [slotsByService]="slotsByService" (selectSlot)="onSlotPicked($event)">
      </app-reservation-slots-table>

      <!-- Action Buttons -->
      <div class="calendar-buttons">
        <button class="calendar-button primary" (click)="book()">رزرو</button>
        <button class="calendar-button secondary" (click)="cancel()">لغو</button>
      </div>
    </div>
  </div>
</div>